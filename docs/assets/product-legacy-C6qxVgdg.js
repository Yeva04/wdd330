System.register(["./utils-legacy-Cbk2QL-x.js","./ProductData-legacy-DnFEBNY4.js"],function(t,e){"use strict";var o,r,c;return{setters:[t=>{o=t.a,r=t.s},t=>{c=t.P}],execute:function(){class t{constructor(t){this.product=t}calculateDiscount(){const t=this.product.SuggestedRetailPrice||this.product.ListPrice,e=this.product.FinalPrice||this.product.ListPrice;return t&&e&&t>e?{discountPercentage:`${((t-e)/t*100).toFixed(0)}%`,originalPrice:`$${t.toFixed(2)}`,discountedPrice:`$${e.toFixed(2)}`}:null}renderDiscount(){const t=this.calculateDiscount(),e=document.createElement("p");e.id="product-discount",t?e.innerHTML=`Save <strong>${t.discountPercentage}</strong>! Was <s>${t.originalPrice}</s>, Now ${t.discountedPrice}`:e.textContent="No discount available.";const o=document.getElementById("product-description");o?o.parentNode.insertBefore(e,o.nextSibling):console.error("product-description element not found")}}const e=o("product"),d=new c("tents");class n{constructor(t,e){this.productId=t,this.product={},this.dataSource=e}async init(){try{if(this.product=await this.dataSource.findProductById(this.productId),!this.product)return console.error("Product not found for ID:",this.productId),void(document.querySelector(".product-detail").innerHTML="<p>Product not found. Please check the URL (e.g., ?product=880RR).</p>");console.log("Product loaded:",this.product),this.renderProductDetails(),this.addToCartButton(),this.applyDiscount()}catch(t){console.error("Error initializing ProductDetails:",t),document.querySelector(".product-detail").innerHTML="<p>Error loading product. Please try again later.</p>"}}addToCartButton(){const t=document.getElementById("addToCart");t?t.addEventListener("click",()=>{let t=localStorage.getItem("so-cart")?JSON.parse(localStorage.getItem("so-cart")):[];Array.isArray(t)||(t=[]);const e={...this.product,Id:this.product.Id};t.push(e),r("so-cart",t),console.log("Cart updated:",t),alert("Item added to cart!")}):console.error("addToCart button not found in DOM")}renderProductDetails(){const t="/wdd330/";document.getElementById("product-brand").textContent=this.product.Brand.Name||"Unknown Brand",document.getElementById("product-name").textContent=this.product.NameWithoutBrand||this.product.Name||"Unnamed Product";const e=this.product.Image?`${t}images/tents/${this.product.Image.split("/").pop()}`:`${t}images/noun_Tent_2517.svg`;document.getElementById("product-image").src=e,document.getElementById("product-image").alt=this.product.Name||"Product Image",document.getElementById("product-price").textContent=`$${this.product.ListPrice||this.product.FinalPrice||0}`,document.getElementById("product-color").textContent=this.product.Colors?.[0]?.ColorName||"N/A",document.getElementById("product-description").innerHTML=this.product.DescriptionHtmlSimple||"No description available",document.getElementById("addToCart").dataset.id=this.product.Id}applyDiscount(){new t(this.product).renderDiscount()}}new n(e,d).init();const i=o("product");i?new n(i,new c("tents")).init():(console.error("No product ID in URL parameters"),document.querySelector(".product-detail").innerHTML="<p>No product selected. Please use a valid URL (e.g., ?product=880RR).</p>")}}});
