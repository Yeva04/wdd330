import{a as n,s as a}from"./utils-B1gkA_s2.js";import{P as i}from"./ProductData-DRfcUAi5.js";function g(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}class u{constructor(t){this.product=t}calculateDiscount(){const t=this.product.SuggestedRetailPrice||this.product.ListPrice,e=this.product.FinalPrice||this.product.ListPrice;if(t&&e&&t>e){const o=((t-e)/t*100).toFixed(0);return{discountPercentage:"".concat(o,"%"),originalPrice:"$".concat(t.toFixed(2)),discountedPrice:"$".concat(e.toFixed(2))}}return null}renderDiscount(){const t=this.calculateDiscount(),e=document.createElement("p");e.id="product-discount",t?e.innerHTML="Save <strong>".concat(t.discountPercentage,"</strong>! Was <s>").concat(t.originalPrice,"</s>, Now ").concat(t.discountedPrice):e.textContent="No discount available.";const o=document.getElementById("product-description");o?o.parentNode.insertBefore(e,o.nextSibling):console.error("product-description element not found")}}const l=n("product"),p=new i("tents");class s{constructor(t,e){this.productId=t,this.product={},this.dataSource=e}async init(){try{if(this.product=await this.dataSource.findProductById(this.productId),!this.product){console.error("Product not found for ID:",this.productId),document.querySelector(".product-detail").innerHTML="<p>Product not found. Please check the URL (e.g., ?product=880RR).</p>";return}console.log("Product loaded:",this.product),this.renderProductDetails(),this.addToCartButton(),this.applyDiscount()}catch(t){console.error("Error initializing ProductDetails:",t),document.querySelector(".product-detail").innerHTML="<p>Error loading product. Please try again later.</p>"}}addToCartButton(){const t=document.getElementById("addToCart");t?t.addEventListener("click",()=>{let e=localStorage.getItem("so-cart")?JSON.parse(localStorage.getItem("so-cart")):[];Array.isArray(e)||(e=[]);const o={...this.product,Id:this.product.Id};e.push(o),a("so-cart",e),console.log("Cart updated:",e),alert("Item added to cart!")}):console.error("addToCart button not found in DOM")}renderProductDetails(){var o,c;const t="/wdd330/";document.getElementById("product-brand").textContent=this.product.Brand.Name||"Unknown Brand",document.getElementById("product-name").textContent=this.product.NameWithoutBrand||this.product.Name||"Unnamed Product";const e=this.product.Image?"".concat(t,"images/tents/").concat(this.product.Image.split("/").pop()):"".concat(t,"images/noun_Tent_2517.svg");document.getElementById("product-image").src=e,document.getElementById("product-image").alt=this.product.Name||"Product Image",document.getElementById("product-price").textContent="$".concat(this.product.ListPrice||this.product.FinalPrice||0),document.getElementById("product-color").textContent=((c=(o=this.product.Colors)==null?void 0:o[0])==null?void 0:c.ColorName)||"N/A",document.getElementById("product-description").innerHTML=this.product.DescriptionHtmlSimple||"No description available",document.getElementById("addToCart").dataset.id=this.product.Id}applyDiscount(){new u(this.product).renderDiscount()}}const m=new s(l,p);m.init();const d=n("product");if(!d)console.error("No product ID in URL parameters"),document.querySelector(".product-detail").innerHTML="<p>No product selected. Please use a valid URL (e.g., ?product=880RR).</p>";else{const r=new i("tents");new s(d,r).init()}export{g as __vite_legacy_guard};
