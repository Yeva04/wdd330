import{r as c}from"./utils-B1gkA_s2.js";import{P as o,a as d}from"./ProductDetails-BnQRvQVn.js";function g(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}let i=null;function u(e){var r;if(console.log("Rendering product, image path:",e.Image),!e||!e.Id)return console.error("Invalid product data:",e),'<li class="product-card error">Invalid Product</li>';const t="/wdd330/",a="".concat(t,"images/tents/").concat(e.Image.split("/").pop(),"?v=").concat(new Date().getTime()),s="".concat(t,"images/noun_Tent_2517.svg");return'<li class="product-card" data-id="'.concat(e.Id,'">\n    <a href="#" class="product-link">\n      <img src="').concat(a,'" alt="Image of ').concat(e.Name||e.NameWithoutBrand||"Unnamed Product","\" \n           onload=\"console.log('Image loaded:', '").concat(a,"');\" \n           onerror=\"console.log('Image failed, using fallback:', '").concat(s,"'); this.src='").concat(s,'\'; this.onerror=null;" />\n      <h3 class="card__brand">').concat(((r=e.Brand)==null?void 0:r.Name)||"Unknown Brand",'</h3>\n      <h2 class="card__name">').concat(e.Name||e.NameWithoutBrand||"Unnamed Product",'</h2>\n      <p class="product-card__price">$').concat(e.ListPrice||e.FinalPrice||0,'</p>\n    </a>\n    <button class="addToCart" data-id="').concat(e.Id,'">Add to Cart</button>\n  </li>')}class h{constructor(t,a,s){this.category=t,this.dataSource=a,this.listElement=s,this.initProductDetails()}initProductDetails(){const t=new URLSearchParams(window.location.search).get("product");t&&(i=new o(t,new ProductData("tents")),i.init().then(()=>{this.hideList()}))}hideList(){if(this.listElement){this.listElement.style.display="none";const t=document.querySelector(".product-detail");t&&(t.style.display="block")}}showList(){if(this.listElement){this.listElement.style.display="block";const t=document.querySelector(".product-detail");t&&(t.style.display="none")}}async init(){try{const t=await this.dataSource.getData();console.log("Raw data from tents.json:",t);const a=t.filter(s=>["880RR","985RF","985PR","344YJ"].includes(s.Id));console.log("Filtered list length:",a.length,"Products:",a),this.renderList(a),this.addEventListeners()}catch(t){console.error("Error loading products:",t),this.listElement.innerHTML='<p class="error-message">Failed to load products. Please refresh the page.</p>'}}renderList(t){c(u,this.listElement,t)}addEventListeners(){this.listElement.querySelectorAll(".product-link").forEach(s=>{s.addEventListener("click",r=>{r.preventDefault();const n=s.closest(".product-card").dataset.id;window.location.search="?product=".concat(n),!i||i.productId!==n?(i=new o(n,new ProductData("tents")),i.init().then(()=>{this.hideList()})):i.init().then(()=>{this.hideList()})})}),this.listElement.querySelectorAll(".addToCart").forEach(s=>{s.addEventListener("click",()=>{console.log("Add to cart clicked for:",s.dataset.id)})})}}const m=new d("tents"),l=document.querySelector(".product-list"),p=new h("tents",m,l);p.init().catch(e=>{console.error("Error initializing ProductList:",e),l.innerHTML='<p class="error-message">Failed to load products. Please refresh the page.</p>'});export{g as __vite_legacy_guard};
