(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=o(r);fetch(r.href,n)}})();function l(t){if(t.ok)return t.json();throw new Error(`Bad Response: ${t.status} ${t.statusText} for ${t.url}`)}class c{constructor(e){this.category=e,this.path=`./json/${this.category}.json`,this.fallbackData=[{Id:"880RR",Brand:{Name:"Marmot"},Name:"Marmot Ajax Tent - 3-Person, 3-Season",NameWithoutBrand:"Ajax Tent - 3-Person, 3-Season",ListPrice:199.99,FinalPrice:199.99,SuggestedRetailPrice:300,Image:"./images/tents/marmot-ajax-tent-3-person-3-season-in-pale-pumpkin-terracotta~p~880rr_01~320.jpg",Colors:[{ColorName:"Pale Pumpkin/Terracotta"}],DescriptionHtmlSimple:"Get out and enjoy nature with Marmot's Ajax tent, featuring a smart design with durable, waterproof construction and two doors for easy access."},{Id:"985RF",Brand:{Name:"The North Face"},Name:"The North Face Talus Tent - 4-Person, 3-Season",NameWithoutBrand:"Talus Tent - 4-Person, 3-Season",ListPrice:199.99,FinalPrice:199.99,SuggestedRetailPrice:299,Image:"./images/tents/the-north-face-talus-tent-4-person-3-season-in-golden-oak-saffron-yellow~p~985rf_01~320.jpg",Colors:[{ColorName:"Golden Oak/Saffron Yellow"}],DescriptionHtmlSimple:"<strong>Closeout</strong>. Enjoy a fun night under stars with your favorite people in The North Face's Talus four-person tent."},{Id:"985PR",Brand:{Name:"The North Face"},Name:"The North Face Alpine Guide Tent - 3-Person, 4-Season",NameWithoutBrand:"Alpine Guide Tent - 3-Person, 4-Season",ListPrice:349.99,FinalPrice:349.99,SuggestedRetailPrice:489,Image:"./images/tents/the-north-face-alpine-guide-tent-3-person-4-season-in-canary-yellow-high-rise-grey~p~985pr_01~320.jpg",Colors:[{ColorName:"Canary Yellow/High Rise Grey"}],DescriptionHtmlSimple:"<strong>Closeout</strong>. Be ready for any outdoor adventure in The North Face's Alpine Guide tent."},{Id:"344YJ",Brand:{Name:"Cedar Ridge"},Name:"Cedar Ridge Rimrock Tent - 2-Person, 3-Season",NameWithoutBrand:"Rimrock Tent - 2-Person, 3-Season",ListPrice:69.99,FinalPrice:69.99,SuggestedRetailPrice:89.99,Image:"./images/tents/cedar-ridge-rimrock-tent-2-person-3-season-in-rust-clay~p~344yj_01~320.jpg",Colors:[{ColorName:"Rust/Clay"}],DescriptionHtmlSimple:"<strong>Closeouts</strong>. Lightweight and ready for adventure, this Cedar Ridge Rimrock tent boasts a weather-ready design."}]}getData(){return console.log(`Fetching: ${this.path}`),fetch(this.path).then(l).then(e=>(console.log("Fetched data:",e),e)).catch(e=>(console.error("Fetch error, using fallback data:",e),this.fallbackData))}async findProductById(e){const o=await this.getData();console.log("Products in findProductById:",o);const a=o.find(r=>r.Id===e);return a||console.warn(`Product with ID ${e} not found in data`),a||null}}function d(t,e,o,a="afterbegin",r=!1){r&&(e.innerHTML="");const n=o.map(t);e.insertAdjacentHTML(a,n.join(""))}function u(t){if(console.log("Rendering product, image path:",t.Image),!t||!t.Id)return console.error("Invalid product data:",t),'<li class="product-card error">Invalid Product</li>';const e="/wdd330/",o=`${e}images/tents/${t.Image.split("/").pop()}?v=${new Date().getTime()}`,a=`${e}images/noun_Tent_2517.svg`;return`<li class="product-card">
    <a href="/wdd330/product_pages/index.html?product=${t.Id}">
      <img src="${o}" alt="Image of ${t.Name||t.NameWithoutBrand||"Unnamed Product"}" 
           onload="console.log('Image loaded:', '${o}');" 
           onerror="console.log('Image failed, using fallback:', '${a}'); this.src='${a}'; this.onerror=null;" />
      <h3 class="card__brand">${t.Brand?.Name||"Unknown Brand"}</h3>
      <h2 class="card__name">${t.Name||t.NameWithoutBrand||"Unnamed Product"}</h2>
      <p class="product-card__price">$${t.ListPrice||t.FinalPrice||0}</p>
    </a>
    <button class="addToCart" data-id="${t.Id}">Add to Cart</button>
  </li>`}class g{constructor(e,o,a){this.category=e,this.dataSource=o,this.listElement=a}async init(){try{const e=await this.dataSource.getData();console.log("Raw data from tents.json:",e);const o=e.filter(a=>["880RR","985RF","985PR","344YJ"].includes(a.Id));console.log("Filtered list length:",o.length,"Products:",o),this.renderList(o),this.addEventListeners()}catch(e){console.error("Error loading products:",e),this.listElement.innerHTML='<p class="error-message">Failed to load products. Please refresh the page.</p>'}}renderList(e){d(u,this.listElement,e)}addEventListeners(){this.listElement.querySelectorAll(".addToCart").forEach(o=>{o.addEventListener("click",()=>{console.log("Add to cart clicked for:",o.dataset.id)})})}}const h=new c("tents"),i=document.querySelector(".product-list"),m=new g("tents",h,i);m.init().catch(t=>{console.error("Error initializing ProductList:",t),i.innerHTML='<p class="error-message">Failed to load products. Please refresh the page.</p>'});
